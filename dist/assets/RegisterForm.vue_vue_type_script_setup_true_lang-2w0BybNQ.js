var w=(x,i,u)=>new Promise((l,f)=>{var g=r=>{try{c(u.next(r))}catch(d){f(d)}},v=r=>{try{c(u.throw(r))}catch(d){f(d)}},c=r=>r.done?l(r.value):Promise.resolve(r.value).then(g,v);c((u=u.apply(x,i)).next())});import{u as U,a as B,b as M,L,_ as T}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-CZQ4gGJZ.js";import{S as $}from"./index-BQqLbfF_.js";import{a as D,c as N,u as V,b as P}from"./entry/index-BcidWyMC.js";import{a8 as b,E as p,B as S}from"./antd-BFwNME3X.js";import{d as q,f as k,r as G,c as Z,u as e,Z as j,_ as A,k as a,a9 as n,G as h,a0 as C,ab as H}from"./vue-DhXvXWyK.js";const J={key:0},ee=q({__name:"RegisterForm",setup(x){const i=b.Item,u=p.Password,{t:l}=D(),{handleBackLogin:f,getLoginState:g}=U(),{createErrorModal:v,createSuccessModal:c}=P(),{prefixCls:r}=N("register"),d=V(),y=k(),_=k(!1),o=G({username:"",name:"",email:"",phone_number:"",password:"",password_confirmation:""}),{getFormRules:F}=B(o),{validForm:z}=M(y),R=Z(()=>e(g)===L.REGISTER);function E(){return w(this,null,function*(){const m=yield z();if(m)try{_.value=!0;const s=yield d.register(o);(s==null?void 0:s.user)&&(c({title:l("sys.login.registerSuccessTitle"),content:`${l("sys.login.registerSuccessDesc")}: ${m.username}`,getContainer:()=>document.body.querySelector(`.${r}`)||document.body}),I())}catch(s){const t=s.response.data.message;v({title:l("sys.api.errorTip"),content:t||s.message||l("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${r}`)||document.body})}finally{_.value=!1}})}function I(){var m;(m=y.value)==null||m.resetFields()}return(m,s)=>R.value?(j(),A("div",J,[a(T,{class:"enter-x"}),a(e(b),{class:"p-4 enter-x",model:o,rules:e(F),ref_key:"formRef",ref:y},{default:n(()=>[a(e(i),{name:"username",class:"enter-x"},{default:n(()=>[a(e(p),{class:"fix-auto-fill",size:"large",value:o.username,"onUpdate:value":s[0]||(s[0]=t=>o.username=t),placeholder:e(l)("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"name",class:"enter-x"},{default:n(()=>[a(e(p),{class:"fix-auto-fill",size:"large",value:o.name,"onUpdate:value":s[1]||(s[1]=t=>o.name=t),placeholder:e(l)("sys.login.name")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"phone_number",class:"enter-x"},{default:n(()=>[a(e(p),{size:"large",value:o.phone_number,"onUpdate:value":s[2]||(s[2]=t=>o.phone_number=t),placeholder:e(l)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"email",class:"enter-x"},{default:n(()=>[a(e(p),{size:"large",value:o.email,"onUpdate:value":s[3]||(s[3]=t=>o.email=t),placeholder:e(l)("sys.login.email"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"password",class:"enter-x"},{default:n(()=>[a(e($),{size:"large",value:o.password,"onUpdate:value":s[4]||(s[4]=t=>o.password=t),placeholder:e(l)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"password_confirmation",class:"enter-x"},{default:n(()=>[a(e(u),{size:"large",visibilityToggle:"",value:o.password_confirmation,"onUpdate:value":s[5]||(s[5]=t=>o.password_confirmation=t),placeholder:e(l)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),a(e(S),{type:"primary",class:"enter-x",size:"large",block:"",onClick:E,loading:_.value},{default:n(()=>[h(C(e(l)("sys.login.registerButton")),1)]),_:1},8,["loading"]),a(e(S),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(f)},{default:n(()=>[h(C(e(l)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])])):H("",!0)}});export{ee as _};
