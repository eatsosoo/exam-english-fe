var ee=Object.defineProperty,te=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var $=(e,m,b)=>m in e?ee(e,m,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[m]=b,f=(e,m)=>{for(var b in m||(m={}))oe.call(m,b)&&$(e,b,m[b]);if(H)for(var b of H(m))ne.call(m,b)&&$(e,b,m[b]);return e},z=(e,m)=>te(e,se(m));import{c as N,u as s,d as ae,I as le,m as re,k as p,i as ce,ac as E,A as ie,G as de}from"./vue-DhXvXWyK.js";import{c as K}from"./componentMap-BjYe58Mw.js";import{aJ as fe,aw as G,a as ue,av as me,aW as he}from"./entry/index-BcidWyMC.js";import{i as pe,N as U,c as Q,s as be}from"./helper-JLwI6lBn.js";import{ax as ge,e as y,W as q,aa as X,a7 as ye,a8 as Y,f as Ce,r as Pe,w as xe}from"./antd-BFwNME3X.js";function we(e){return"slot"in e}function Ae(e){return!we(e)}function Ie(e,m){return N(()=>{const b=s(e),{labelCol:j={},wrapperCol:M={}}=b.itemProps||{},{labelWidth:D,disabledLabelWidth:u}=b,{labelWidth:C,labelCol:v,wrapperCol:F,layout:T}=s(m);if(!C&&!D&&!v||u)return j.style={textAlign:"left"},{labelCol:j,wrapperCol:M};let A=D!=null?D:C;const V=f(f({},v),j),k=f(f({},F),M);return fe(A)&&(A=ge(A)?`${A}px`:A),{labelCol:f({style:{width:A}},V),wrapperCol:f({style:{width:T==="vertical"?"100%":`calc(100% - ${A})`}},k)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ce(e)}const De=ae({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:m}){const{t:b}=ue(),{schema:j,formProps:M}=le(e);j.value.component==="CropperAvatar"&&typeof M.value.size=="string"&&(M.value.size=void 0);const D=Ie(j,M),u=N(()=>{const{allDefaultValues:o,formModel:t,schema:r}=e,{mergeDynamicData:l}=e.formProps;return{field:r.field,model:t,values:f(f(f({},l),o),t),schema:r}}),C=N(()=>{var c;const{schema:o,tableAction:t,formModel:r,formActionType:l}=e;let{componentProps:n={}}=o;return y(n)&&(n=(c=n({schema:o,tableAction:t,formModel:r,formActionType:l}))!=null?c:{}),pe(o.component)&&(n=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},n)),n}),v=N(()=>{const{disabled:o}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=s(C);let l=!!o||r;return q(t)&&(l=t),y(t)&&(l=t(s(u))),l}),F=N(()=>{const{readonly:o}=e.formProps,{dynamicReadonly:t}=e.schema,{readonly:r=!1}=s(C);let l=o||r;return q(t)&&(l=t),y(t)&&(l=t(s(u))),l});function T(){const{show:o,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,l=r&&q(e.isAdvanced)?e.isAdvanced:!0;let n=!0,c=!0;return q(o)&&(n=o),q(t)&&(c=t),y(o)&&(n=o(s(u))),y(t)&&(c=t(s(u))),n=n&&l,{isShow:n,isIfShow:c}}function A(){var L;const{rules:o=[],component:t,rulesMessageJoinLabel:r,label:l,dynamicRules:n,required:c}=e.schema;if(y(n))return n(s(u));let a=Ce(o);const{rulesMessageJoinLabel:P}=e.formProps,I=(Reflect.has(e.schema,"rulesMessageJoinLabel")?r:P)?y(l)?"":l:"",x=t?Q(t)+I:I;function h(d,i){const S=d.message||x;return i===void 0||Pe(i)||Array.isArray(i)&&i.length===0||typeof i=="string"&&i.trim()===""||typeof i=="object"&&Reflect.has(i,"checked")&&Reflect.has(i,"halfChecked")&&Array.isArray(i.checked)&&Array.isArray(i.halfChecked)&&i.checked.length===0&&i.halfChecked.length===0?Promise.reject(S):Promise.resolve()}const g=y(c)?c(s(u)):c;if(g)if(!a||a.length===0){const d=U.includes(t||"Input")?"blur":"change";a=[{required:g,validator:h,trigger:d}]}else a.findIndex(i=>Reflect.has(i,"required"))===-1&&a.push({required:g,validator:h});const O=a.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(O!==-1){const d=a[O],{isShow:i}=T();if(i||(d.required=!1),t){d.message=d.message||x,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const S=(L=s(C))==null?void 0:L.valueFormat;be(d,t,S)}}const w=a.findIndex(d=>d.max);return w!==-1&&!a[w].validator&&(a[w].message=a[w].message||b("component.form.maxTip",[a[w].max])),a}function V(){var i;if(!Ae(e.schema))return null;const{renderComponentContent:o,component:t,field:r,changeEvent:l="change",valueField:n,valueFormat:c}=e.schema,a=t&&["Switch","Checkbox"].includes(t),P=`on${xe(l)}`,R={[P]:(...S)=>{const[B]=S,W=B?B.target:null;let J=W?a?W.checked:W.value:B;y(c)&&(J=c(z(f({},s(u)),{value:J}))),e.setFormModel(r,J,e.schema),g[P]&&g[P](...S)}},I=K.get(t),{autoSetPlaceHolder:x,size:h}=e.formProps,g=z(f({allowClear:!0,size:h},s(C)),{disabled:s(v),readonly:s(F)});!g.disabled&&x&&t!=="RangePicker"&&t&&(g.placeholder=((i=s(C))==null?void 0:i.placeholder)||Q(t)),g.codeField=r,g.formValues=s(u);const w={[n||(a?"checked":"value")]:e.formModel[r]},L=f(f(f({},g),R),w);if(!o)return p(I,L,null);const d=y(o)?f({},o(s(u),{disabled:s(v),readonly:s(F)})):{default:()=>o};return p(I,L,_(d)?d:{default:()=>[d]})}function k(){const{label:o,helpMessage:t,helpComponentProps:r,subLabel:l}=e.schema,n=y(o)?o(s(u)):o,c=l?p("span",null,[n,de(" "),p("span",{class:"text-secondary"},[l])]):n,a=y(t)?t(s(u)):t;return!a||Array.isArray(a)&&a.length===0?c:p("span",null,[c,p(he,E({placement:"top",class:"mx-1",text:a},r),null)])}function Z(){const{itemProps:o,slot:t,render:r,field:l,suffix:n,component:c,prefix:a}=e.schema,{labelCol:P,wrapperCol:R}=s(D),{colon:I}=e.formProps,x={disabled:s(v),readonly:s(F)};if(c==="Divider"){let h;return p(X,{span:24},{default:()=>[p(ye,s(C),_(h=k())?h:{default:()=>[h]})]})}else if(c==="BasicTitle"){let h;return p(Y.Item,{labelCol:P,wrapperCol:R,name:l,class:{"suffix-item":!!n,"prefix-item":!!a}},{default:()=>[p(me,s(C),_(h=k())?h:{default:()=>[h]})]})}else{const h=()=>t?G(m,t,s(u),x):r?r(s(u),x):V(),g=!!n,O=y(n)?n(s(u)):n,w=!!a,L=y(a)?a(s(u)):a;return c&&U.includes(c)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),p(Y.Item,E({name:l,colon:I,class:{"suffix-item":g,"prefix-item":w}},o,{label:k(),rules:A(),labelCol:P,wrapperCol:R}),{default:()=>[p("div",{style:"display:flex"},[w&&p("span",{class:"prefix"},[L]),p("div",{style:"flex:1;"},[h()]),g&&p("span",{class:"suffix"},[O])])]})}}return()=>{let o;const{colProps:t={},colSlot:r,renderColContent:l,component:n,slot:c}=e.schema;if(!(n&&K.has(n)||c))return null;const{baseColProps:a={}}=e.formProps,P=f(f({},a),t),{isIfShow:R,isShow:I}=T(),x=s(u),h={disabled:s(v),readonly:s(F)};return R&&re(p(X,P,_(o=r?G(m,r,x,h):l?l(x,h):Z())?o:{default:()=>[o]}),[[ie,I]])}}});export{De as _};
