var k=Object.defineProperty,P=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var C=(o,t,e)=>t in o?k(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,y=(o,t)=>{for(var e in t||(t={}))T.call(t,e)&&C(o,e,t[e]);if(b)for(var e of b(t))A.call(t,e)&&C(o,e,t[e]);return o},w=(o,t)=>P(o,M(t));var h=(o,t,e)=>new Promise((i,p)=>{var d=s=>{try{n(e.next(s))}catch(m){p(m)}},f=s=>{try{n(e.throw(s))}catch(m){p(m)}},n=s=>s.done?i(s.value):Promise.resolve(s.value).then(d,f);n((e=e.apply(o,t)).next())});import{_ as B}from"./BasicForm.vue_vue_type_script_setup_true_lang-DbX2m63q.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BL3smh9L.js";import"./componentMap-BjYe58Mw.js";import{u as q}from"./useForm-CX4sdfhA.js";import{_ as D}from"./StudentTable.vue_vue_type_script_setup_true_lang-CgMuZJfy.js";import{P as E}from"./index-DnpQZsBg.js";import{s as G}from"./data-BLwuGLPZ.js";import{c as I,a as N,b as V,d as H}from"./entry/index-BcidWyMC.js";import{b as O}from"./class-6s197Rj_.js";import{O as v}from"./antd-BFwNME3X.js";import{d as W,f as _,a7 as Z,Z as j,a8 as z,a9 as l,k as c,G as J,a0 as K,u as a}from"./vue-DhXvXWyK.js";import"./FormItem.vue_vue_type_script_lang-BQsfJt-d.js";import"./helper-JLwI6lBn.js";import"./index-DVzcH--h.js";import"./useWindowSizeFn-SAmktNkd.js";import"./useFormItem-oxzr_Srp.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DFfZeCIC.js";import"./index-BKjGR123.js";import"./uuid-D0SLUWHI.js";import"./useSortable-Chl02yjp.js";import"./download-C8Z1CAz1.js";import"./base64Conver-bBv-IO2K.js";import"./index-BQqLbfF_.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-D_32YSSg.js";import"./copyTextToClipboard-DJj00FMq.js";import"./index-BH-x8rO3.js";import"./index-BO5ERYHo.js";import"./BasicTable.vue_vue_type_script_setup_true_lang-wYzSQTfH.js";import"./TableImg.vue_vue_type_style_index_0_lang-D3F4T3v_.js";import"./onMountedOrActivated-CvY6VkYA.js";import"./sortable.esm-CoO8jRpa.js";import"./useTable-CjgbZnnJ.js";import"./AddStudentModal.vue_vue_type_script_setup_true_lang-Cq8BlZMd.js";import"./tableData-BTxkGeqt.js";import"./student-DuYQ3A9a.js";import"./PageWrapper.vue_vue_type_style_index_0_lang-wgu38p8X.js";import"./useContentViewHeight-CCI8OV4I.js";import"./exam-CAJo7aCX.js";const L=W({name:"FormHightPage",__name:"new",setup(o){const{t}=N(),e=_(null),i=_([]),p=_(!1),{prefixCls:d}=I("register"),{createErrorModal:f,createSuccessModal:n}=V(),[s,{validate:m,resetFields:F}]=q({layout:"vertical",baseColProps:{span:6},schemas:G,showActionButtonGroup:!1}),S=`${t("form.newClassForm.studentRegister")} (${t("table.numberStudent")}: ${i.value.length})`;function x(){return h(this,null,function*(){try{const[r]=yield Promise.all([m()]),u=w(y({},r),{title:r.title,description:r.description,start_date:r.start_date,end_date:r.end_date,hour:r.hour.split(" ")[1],students:i.value.map($=>({id:$.id}))});(yield O(u))&&(n({title:t("form.newClassForm.title"),content:t("common.createSuccessfully"),getContainer:()=>document.body.querySelector(`.${d}`)||document.body}),F())}catch(r){const u=r.response.data.message;f({title:t("sys.api.errorTip"),content:u||r.message||t("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${d}`)||document.body})}finally{p.value=!1}})}function R(r){i.value=r}return(r,u)=>{const g=Z("a-button");return j(),z(a(E),{class:"high-form",title:a(t)("form.newClassForm.title"),content:a(t)("form.newClassForm.description")},{rightFooter:l(()=>[c(g,{type:"primary",onClick:x},{default:l(()=>[J(K(a(t)("common.confirm")),1)]),_:1})]),default:l(()=>[c(a(v),{title:a(t)("form.newClassForm.information"),bordered:!1},{default:l(()=>[c(a(B),{onRegister:a(s)},null,8,["onRegister"])]),_:1},8,["title"]),c(a(v),{title:S,bordered:!1,class:"!mt-5"},{default:l(()=>[c(D,{ref_key:"tableRef",ref:e,onSelectStudents:R},null,512)]),_:1})]),_:1},8,["title","content"])}}}),Dt=H(L,[["__scopeId","data-v-c24cc56f"]]);export{Dt as default};
