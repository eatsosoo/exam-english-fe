var I=(k,u,l)=>new Promise((r,g)=>{var o=n=>{try{c(l.next(n))}catch(d){g(d)}},v=n=>{try{c(l.throw(n))}catch(d){g(d)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(o,v);c((l=l.apply(k,u)).next())});import{d as M,f as _,r as A,c as N,u as e,Z as P,_ as U,m as L,A as h,k as s,a9 as a,G as p,a0 as y,ao as G,F as V}from"./vue-DhXvXWyK.js";import{u as K,a as O,b as q,L as x,_ as W}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-CZQ4gGJZ.js";import{a as Z,c as j,u as H,b as J}from"./entry/index-BcidWyMC.js";import{a8 as B,E as D,a9 as Q,B as S,aa as X,ab as Y}from"./antd-BFwNME3X.js";const ne=M({__name:"LoginForm",setup(k){const u=X,l=Y,r=B.Item,g=D.Password,{t:o}=Z(),{notification:v,createErrorModal:c}=J(),{prefixCls:n}=j("login"),d=H(),{setLoginState:b,getLoginState:T}=K(),{getFormRules:$}=O(),C=_(),w=_(!1),R=_(!1),m=A({account:"admin@admin.com",password:"12341234"}),{validForm:z}=q(C),E=N(()=>e(T)===x.LOGIN);function F(){return I(this,null,function*(){const f=yield z();if(f)try{w.value=!0,(yield d.login({password:f.password,username:f.account,mode:"none"}))&&v.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${f.account}`,duration:3})}catch(t){c({title:o("sys.api.errorTip"),content:t.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${n}`)||document.body})}finally{w.value=!1}})}return(f,t)=>(P(),U(V,null,[L(s(W,{class:"enter-x"},null,512),[[h,E.value]]),L(s(e(B),{class:"p-4 enter-x",model:m,rules:e($),ref_key:"formRef",ref:C,onKeypress:G(F,["enter"])},{default:a(()=>[s(e(r),{name:"account",class:"enter-x"},{default:a(()=>[s(e(D),{size:"large",value:m.account,"onUpdate:value":t[0]||(t[0]=i=>m.account=i),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(r),{name:"password",class:"enter-x"},{default:a(()=>[s(e(g),{size:"large",visibilityToggle:"",value:m.password,"onUpdate:value":t[1]||(t[1]=i=>m.password=i),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(l),{class:"enter-x"},{default:a(()=>[s(e(u),{span:12},{default:a(()=>[s(e(r),null,{default:a(()=>[s(e(Q),{checked:R.value,"onUpdate:checked":t[2]||(t[2]=i=>R.value=i),size:"small"},{default:a(()=>[p(y(e(o)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(u),{span:12},{default:a(()=>[s(e(r),{style:{"text-align":"right"}},{default:a(()=>[s(e(S),{type:"link",size:"small",onClick:t[3]||(t[3]=i=>e(b)(e(x).RESET_PASSWORD))},{default:a(()=>[p(y(e(o)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(r),{class:"enter-x"},{default:a(()=>[s(e(S),{type:"primary",size:"large",block:"",onClick:F,loading:w.value},{default:a(()=>[p(y(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),s(e(l),{class:"enter-x",gutter:[16,16]},{default:a(()=>[s(e(u),{md:8,xs:24},{default:a(()=>[s(e(S),{block:"",onClick:t[4]||(t[4]=i=>e(b)(e(x).REGISTER))},{default:a(()=>[p(y(e(o)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),[[h,E.value]])],64))}});export{ne as _};
