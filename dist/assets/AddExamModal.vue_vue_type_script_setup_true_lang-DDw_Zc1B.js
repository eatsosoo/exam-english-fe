var g=(l,m,o)=>new Promise((t,r)=>{var p=e=>{try{n(o.next(e))}catch(a){r(a)}},u=e=>{try{n(o.throw(e))}catch(a){r(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(p,u);n((o=o.apply(l,m)).next())});import{B as w}from"./index-DVzcH--h.js";import{_ as b}from"./BasicForm.vue_vue_type_script_setup_true_lang-DbX2m63q.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BL3smh9L.js";import"./componentMap-BjYe58Mw.js";import{u as h}from"./useForm-CX4sdfhA.js";import{c as M}from"./data-BLwuGLPZ.js";import{c as v,a as k,b as E}from"./entry/index-BcidWyMC.js";import{b as F}from"./exam-CAJo7aCX.js";import{d as S,f as x,Z as B,a8 as R,a9 as $,k as q,u as i,ac as A}from"./vue-DhXvXWyK.js";const z=S({__name:"AddExamModal",props:{type:{type:String,required:!0}},emits:["success"],setup(l,{emit:m}){const o=l,{t}=k(),{createErrorModal:r,createSuccessModal:p}=E(),[u,{validate:n,resetFields:e}]=h({labelWidth:120,schemas:M,showActionButtonGroup:!1,actionColOptions:{span:24}}),{prefixCls:a}=v("register"),f=x(!1),y=x(),_=m;function C(){return g(this,null,function*(){var c;if(!y.value){r({title:t("sys.api.errorTip"),content:t("sys.api.errorMessage")});return}try{const s=yield n(),d={title:s.title,deadline:s.deadline.split(" ")[0],type:o.type};f.value=!0,(yield F(d))&&(p({title:t("form.newClassForm.title"),content:t("common.createSuccessfully"),getContainer:()=>document.body.querySelector(`.${a}`)||document.body}),e(),_("success"))}catch(s){if(s.errorFields)return;const d=(c=s.response)==null?void 0:c.data.message;r({title:t("sys.api.errorTip"),content:d||s.message||t("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${a}`)||document.body})}finally{f.value=!1}})}return(c,s)=>(B(),R(i(w),A(c.$attrs,{title:i(t)("form.exam.title"),width:"500px","can-fullscreen":!1,loading:f.value,onOk:C,onCancel:i(e)}),{default:$(()=>[q(i(b),{onRegister:i(u),ref_key:"formRef",ref:y},null,8,["onRegister"])]),_:1},16,["title","loading","onCancel"]))}});export{z as _};
