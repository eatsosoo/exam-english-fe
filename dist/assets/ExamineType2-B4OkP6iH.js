var d=(v,s,e)=>new Promise((u,r)=>{var n=o=>{try{l(e.next(o))}catch(a){r(a)}},c=o=>{try{l(e.throw(o))}catch(a){r(a)}},l=o=>o.done?u(o.value):Promise.resolve(o.value).then(n,c);l((e=e.apply(v,s)).next())});import{bM as f}from"./entry/index-BcidWyMC.js";import{d as h,f as i,Z as p,_ as m,$ as _,ab as b}from"./vue-DhXvXWyK.js";import"./antd-BFwNME3X.js";const y={class:"audio-recorder"},w=["disabled"],R=["disabled"],g=["src"],x=h({__name:"ExamineType2",setup(v){const s=i(!1),e=i(null),u=i([]),r=i(null),n=i(null),c=()=>d(this,null,function*(){try{const a=yield navigator.mediaDevices.getUserMedia({audio:!0});e.value=new MediaRecorder(a),s.value=!0,e.value.ondataavailable=t=>{u.value.push(t.data)},e.value.onstop=()=>{const t=new Blob(u.value,{type:"audio/webm"});r.value=URL.createObjectURL(t),n.value=new File([t],"recording.webm",{type:"audio/webm"})},e.value.start(),setTimeout(l,15*60*1e3)}catch(a){}}),l=()=>{e.value&&(e.value.stop(),s.value=!1)},o=()=>d(this,null,function*(){if(!n.value)return;const a=new FormData;a.append("file",n.value);try{const t=yield f.post("http://localhost:8000/api/upload-audio",a,{headers:{"Content-Type":"multipart/form-data"}});alert("Upload successful")}catch(t){}});return(a,t)=>(p(),m("div",y,[_("button",{onClick:c,disabled:s.value},"Start Recording",8,w),_("button",{onClick:l,disabled:!s.value},"Stop Recording",8,R),r.value?(p(),m("audio",{key:0,src:r.value,controls:""},null,8,g)):b("",!0),n.value?(p(),m("button",{key:1,onClick:o},"Upload Audio")):b("",!0)]))}});export{x as default};
