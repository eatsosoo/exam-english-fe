var K=Object.defineProperty;var R=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var j=(p,m,a)=>m in p?K(p,m,{enumerable:!0,configurable:!0,writable:!0,value:a}):p[m]=a,F=(p,m)=>{for(var a in m||(m={}))Q.call(m,a)&&j(p,a,m[a]);if(R)for(var a of R(m))L.call(m,a)&&j(p,a,m[a]);return p};var $=(p,m,a)=>new Promise((h,l)=>{var r=d=>{try{q(a.next(d))}catch(b){l(b)}},O=d=>{try{q(a.throw(d))}catch(b){l(b)}},q=d=>d.done?h(d.value):Promise.resolve(d.value).then(r,O);q((a=a.apply(p,m)).next())});import{q as Y,b as x,t as Z,y as z,c as H}from"./data-C-2nBY8q.js";import{a as J}from"./entry/index-BcidWyMC.js";import{a8 as f,E as N,ap as P,aT as U,au as A,aU as W,a9 as X}from"./antd-BFwNME3X.js";import{d as ee,f as k,w as ae,a7 as le,Z as o,_,k as i,a9 as n,$ as g,a0 as w,u as e,a8 as c,F as T,aa as C,ab as B,G as I}from"./vue-DhXvXWyK.js";const te={class:"mb-4"},me=ee({__name:"Question",props:{value:{}},emits:["update:value"],setup(p,{emit:m}){const{t:a}=J(),h=p,l=k(h.value),r=k({A:"A",B:"B"}),O=m,q={content:[{required:!0,message:a("common.inputText")}],type:[{required:!0,message:a("common.chooseText")}],answer:[{required:!0,message:a("common.chooseAnswerText")}]},d=k({A:[{required:!0,message:a("common.inputText")}],B:[{required:!0,message:a("common.inputText")}]}),b=k(),G=k(),E=()=>$(this,null,function*(){var s;try{yield b.value.validate(),yield(s=G.value)==null?void 0:s.validate();const u=Object.entries(r.value).map(([y,t])=>({id:y,text:t}));l.value.options=u,O("update:value",F({},l.value))}catch(u){}}),S=s=>{r.value=Object.fromEntries(s.map(({id:u,text:y})=>[u,y])),d.value=Object.fromEntries(s.map(({id:u})=>[u,[{required:!0,message:a("common.inputText")}]]))},V=()=>{const s=H[Object.keys(r.value).length];l.value.options.push({id:s,text:""}),r.value[s]=s,d.value[s]=[{required:!0,message:a("common.inputText")}]},D=()=>{l.value.options.pop();const s=Object.keys(r.value);if(s.length>1){const u=s[s.length-1];delete d.value[u],delete r.value[u]}};return ae(()=>h.value,()=>{l.value=F({},h.value),S(l.value.options)}),(s,u)=>{const y=le("a-button");return o(),_("div",null,[i(e(f),{model:l.value,rules:q,ref_key:"formRef",ref:b},{default:n(()=>[g("div",null,[g("h3",null,w(e(a)("common.questionInformation")),1),i(e(f).Item,{label:e(a)("common.questionContent"),name:"content","label-col":{xl:6,xxl:6},"label-align":"left",required:""},{default:n(()=>[i(e(N),{value:l.value.content,"onUpdate:value":u[0]||(u[0]=t=>l.value.content=t),placeholder:e(a)("common.inputText"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),i(e(f).Item,{label:e(a)("common.questionType"),name:"type","label-col":{xl:6,xxl:6},"label-align":"left",required:""},{default:n(()=>[i(e(P),{value:l.value.type,"onUpdate:value":u[1]||(u[1]=t=>l.value.type=t),placeholder:"Enter question",options:e(Y)},null,8,["value","options"])]),_:1},8,["label"])]),l.value.type===e(x).SingleChoice||l.value.type===e(x).MultipleChoice?(o(),c(e(f),{key:0,model:r.value,rules:d.value,ref_key:"optionFormRef",ref:G,class:"mb-4"},{default:n(()=>[g("h3",null,w(e(a)("common.answerOptions")),1),g("div",null,[(o(!0),_(T,null,C(r.value,(t,v)=>(o(),c(e(f).Item,{key:`answer_${v}`,label:`${e(a)("common.answer")} ${v}`,name:v,class:"flex items-center w-1/2 mb-2",required:""},{default:n(()=>[i(e(N),{value:r.value[v],"onUpdate:value":M=>r.value[v]=M,placeholder:e(a)("common.inputText"),"allow-clear":""},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name"]))),128)),i(y,{type:"success",ghost:"",preIcon:"ant-design:plus-circle-filled",onClick:V}),Object.keys(r.value).length>1?(o(),c(y,{key:0,type:"error",ghost:"",class:"ml-2",preIcon:"ant-design:minus-circle-filled",onClick:D})):B("",!0)])]),_:1},8,["model","rules"])):B("",!0),g("div",te,[g("h3",null,w(e(a)("common.correctAnswer")),1),l.value.type===e(x).SingleChoice?(o(),c(e(f).Item,{key:0,name:"answer",required:""},{default:n(()=>[i(e(U),{value:l.value.answer,"onUpdate:value":u[2]||(u[2]=t=>l.value.answer=t)},{default:n(()=>[(o(!0),_(T,null,C(r.value,(t,v)=>(o(),c(e(A),{key:`correct_answer_${v}`,value:v},{default:n(()=>[I(w(v),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):l.value.type===e(x).MultipleChoice?(o(),c(e(f).Item,{key:1,name:"answer",required:""},{default:n(()=>[i(e(W),{value:l.value.answer,"onUpdate:value":u[3]||(u[3]=t=>l.value.answer=t)},{default:n(()=>[(o(!0),_(T,null,C(r.value,(t,v)=>(o(),c(e(X),{key:`correct_answer_${v}`,value:v},{default:n(()=>[I(w(v),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):l.value.type==="matching"?(o(),c(e(f).Item,{key:2,name:"answer",required:""},{default:n(()=>[i(e(N),{value:l.value.answer,"onUpdate:value":u[4]||(u[4]=t=>l.value.answer=t),placeholder:e(a)("common.enterAnswerText"),class:"mb-4 w-1/2"},null,8,["value","placeholder"])]),_:1})):l.value.type===e(x).TrueFalseNotGiven?(o(),c(e(f).Item,{key:3,name:"answer",required:""},{default:n(()=>[i(e(U),{value:l.value.answer,"onUpdate:value":u[5]||(u[5]=t=>l.value.answer=t)},{default:n(()=>[(o(!0),_(T,null,C(e(Z),t=>(o(),c(e(A),{key:t.value,value:t.value},{default:n(()=>[I(w(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):l.value.type===e(x).YesNoNotGiven?(o(),c(e(f).Item,{key:4,name:"answer",required:""},{default:n(()=>[i(e(U),{value:l.value.answer,"onUpdate:value":u[6]||(u[6]=t=>l.value.answer=t)},{default:n(()=>[(o(!0),_(T,null,C(e(z),t=>(o(),c(e(A),{key:t.value,value:t.value},{default:n(()=>[I(w(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):B("",!0)]),i(y,{type:"primary",ghost:"",onClick:E},{default:n(()=>[I(w(e(a)("common.confirm")),1)]),_:1})]),_:1},8,["model"])])}}});export{me as _};
